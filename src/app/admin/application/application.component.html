<div class="container">
  <div class="page-header">
    <i class="fa fa-laptop page-header-icon"></i>
    <span class="mleft-5">Applications Manager</span>
  </div>
  <div class="add-btn-container">
    <button
      class="btn btn-primary add-btn mbottom-20 mright-30"
      type="button"
      (click)="openCreateApplicationDialog()"
    >
      <i class="fa fa-plus-circle"></i> Add App
    </button>
  </div>

  <div class="application-list-wrapper">
    <div class="application-list-container" *ngFor="let item of applications">
      <app-card
        class="application-list-item mbottom-10"
        [item]="item"
        [flipped]="item.flipped"
        (onEdit)="edit($event)"
        (onDelete)="delete($event)"
        (onVersionCreate)="versionCreate($event)"
        (onVersionEdit)="versionEdit($event)"
        (onVersionDelete)="versionDelete($event)"
      ></app-card>
    </div>
  </div>
</div>

<app-dialog
  #AnalysisDetails
  closeButtonLabel="Close"
  submitButtonLabel="Create"
  (closeEvent)="closeAnalysisDetailsDialog()"
  (submitEvent)="createApplication()"
>
  <div header>
    <div class="title-2">Analysis form details</div>
  </div>
  <div content class="d-flex flex-column">
    <h4>{{ analysis?.ApplicationName }}</h4>
    <h5>{{ analysis?.VersionName }}</h5>
    <h6>Heuristics</h6>
    <div *ngFor="let heuristic of analysis?.Heuristics">
      <p>{{ heuristic.HeuristicText }}</p>
    </div>
    <h6>Groups</h6>
    <div *ngFor="let group of analysis?.Groups">
      <p>{{ group.GroupName }}</p>
    </div>
  </div>
  <div footer></div>
</app-dialog>
<app-dialog
  #CreateApplicationDialog
  closeButtonLabel="Close"
  submitButtonLabel="Create"
  (closeEvent)="closeCreateApplicationDialog()"
  (submitEvent)="createApplication()"
>
  <div header>
    <div class="title-2">Create application</div>
  </div>
  <div content class="d-flex flex-column mb-3">
    <label>Name</label>
    <input type="text" class="form-control" id="" [(ngModel)]="selectedApplication.Name" />
  </div>
  <div content class="d-flex flex-column mb-3">
    <label>Url</label>
    <input type="text" class="form-control" id="" [(ngModel)]="selectedApplication.Url" />
  </div>
  <div footer></div>
</app-dialog>

<app-dialog
  #UpdateApplicationDialog
  closeButtonLabel="Close"
  submitButtonLabel="Update"
  (closeEvent)="closeUpdateApplicationDialog()"
  (submitEvent)="updateApplication()"
>
  <div header>
    <div class="title-2">Update application</div>
  </div>
  <div content class="d-flex flex-column mb-3">
    <label>Name</label>
    <input type="text" class="form-control" id="" [(ngModel)]="selectedApplication.Name" />
  </div>
  <div content class="d-flex flex-column mb-3">
    <label>Url</label>
    <input type="text" class="form-control" id="" [(ngModel)]="selectedApplication.Url" />
  </div>
  <div footer></div>
</app-dialog>

<app-dialog
  #DeleteApplicationDialog
  closeButtonLabel="Close"
  submitButtonLabel="Delete"
  (closeEvent)="closeDeleteApplicationDialog()"
  (submitEvent)="deleteApplication()"
>
  <div header>
    <div class="custom-modal-header delete-modal-header">
      <div class="delete-modal-icon"><i class="fa fa-file-code-o"></i></div>
      <div class="delete-modal-title">Delete application</div>
    </div>
  </div>

  <div content class="d-flex flex-column">
    <p>Are you sure you want to delete this application?</p>
  </div>
  <div footer></div>
</app-dialog>

<app-dialog
  #CreateVersionDialog
  closeButtonLabel="Close"
  submitButtonLabel="Create"
  (closeEvent)="closeCreateVersionDialog()"
  (submitEvent)="createVersion()"
>
  <div header>
    <div class="title-2">Create version</div>
  </div>
  <div content class="d-flex flex-column mb-3">
    <label>Version Name</label>
    <input class="form-control" type="text" id="" [(ngModel)]="selectedVersion.VersionName" />
  </div>
  <div content class="d-flex flex-column mb-3">
    <label>Date</label>
    <input
      class="form-control"
      placeholder="yyyy-mm-dd"
      (click)="d.toggle()"
      name="dp"
      [(ngModel)]="selectedVersion.Date"
      ngbDatepicker
      #d="ngbDatepicker"
    />
  </div>
  <div footer></div>
</app-dialog>

<app-dialog
  #UpdateVersionDialog
  closeButtonLabel="Close"
  submitButtonLabel="Update"
  (closeEvent)="closeUpdateVersionDialog()"
  (submitEvent)="updateVersion()"
>
  <div header>
    <div class="title-2">Update Version</div>
  </div>
  <div content class="d-flex flex-column mb-3">
    <label>Version Name</label>
    <input type="text" id="" class="form-control" [(ngModel)]="selectedVersion.VersionName" />
  </div>
  <div footer></div>
</app-dialog>

<app-dialog
  #DeleteVersionDialog
  closeButtonLabel="Close"
  submitButtonLabel="Delete"
  (closeEvent)="closeDeleteVersionDialog()"
  (submitEvent)="deleteVersion()"
>
  <div header>
    <div class="title-2">Delete Version</div>
  </div>
  <div content class="d-flex flex-column">
    <p>Are you sure you want to delete this version?</p>
  </div>
  <div footer></div>
</app-dialog>
